const config = require('../settings');
const { lee, commands } = require('../lee');
const { runtime } = require('../lib/functions');
const axios = require('axios');
const moment = require("moment-timezone"); // Use timezone-aware moment
const fs = require('fs');

const { getPrefix } = require('../lib/prefix');





lee({
    pattern: "menu",
    alias: "m",
    desc: "Show interactive menu system",
    category: "main",
    react: "ðŸ¤–",
    filename: __filename
}, async (conn, mek, m, { from, reply }) => {
    try {
        // Set the correct timezone, e.g., Africa/Harare. You can change it to match your region
        const currentTime = moment().tz("Africa/Harare").format("HH:mm:ss");
        const currentDate = moment().tz("Africa/Harare").format("dddd, MMMM Do YYYY");
        const prefix = getPrefix();
        const totalCommands = Object.keys(commands).length;

        const menuCaption = `        
â•­â”€â•¼ã€Ž ðŸ¤– *${config.BOT_NAME}* ã€â•¾â”€â•®
â”‚ ðŸ‘¤ á´á´¡É´á´‡Ê€   : @${config.OWNER_NUMBER}
â”‚ ðŸŒ á´á´á´…á´‡    : [ ${config.MODE.toUpperCase()} ]
â”‚ ðŸ•’ á´›Éªá´á´‡    : ${currentTime}
â”‚ ðŸ“† á´…á´€á´›á´‡    : ${currentDate}
â”‚ ðŸ› ï¸ á´˜Ê€á´‡Ò“Éªx  : [ ${prefix} ]
â”‚ ðŸ“Š á´„á´á´…s   : ${totalCommands}
â”‚ ðŸ” á´œá´˜á´›Éªá´á´‡  : ${runtime(process.uptime())}
â”‚ ðŸ‘‘ á´…á´‡á´      : êœ±á´€É´É¢ ÊŸá´‡á´‡
â”‚ ðŸš€ á´ á´‡Ê€sÉªá´É´ : ${config.version}
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â­‘

ðŸ“š *á´á´‡É´á´œ É´á´€á´ ÉªÉ¢á´€á´›Éªá´É´:*
> _Ê€á´‡á´˜ÊŸÊ á´¡Éªá´›Êœ á´€ É´á´œá´Ê™á´‡Ê€ á´›á´ á´á´˜á´‡É´ á´€ á´„á´€á´›á´‡É¢á´Ê€Ê._

â•­â”€â”€ã€” ðŸŒ *á´„á´€á´›á´‡É¢á´Ê€Ê ÊŸÉªsá´›* ã€•â”€â•®
â”‚
â”‚ âžŠ â¬‡ï¸  *á´…á´á´¡É´ÊŸá´á´€á´… á´á´‡É´á´œ*
â”‚ âž‹ ðŸ’¬  *É¢Ê€á´á´œá´˜ á´á´‡É´á´œ*
â”‚ âžŒ ðŸ•¹ï¸  *Ò“á´œÉ´ á´á´‡É´á´œ*
â”‚ âž ðŸ‘‘  *á´á´¡É´á´‡Ê€ á´á´‡É´á´œ*
â”‚ âžŽ ðŸ§   *á´€Éª á´á´‡É´á´œ*
â”‚ âž ðŸŒ¸  *á´€É´Éªá´á´‡ á´á´‡É´á´œ*
â”‚ âž ðŸ”  *á´„á´É´á´ á´‡Ê€á´› á´á´‡É´á´œ*
â”‚ âž‘ ðŸ§©  *á´á´›Êœá´‡Ê€ á´á´‡É´á´œ*
â”‚ âž’ ðŸ’«  *Ê€á´‡á´€á´„á´›Éªá´É´ á´á´‡É´á´œ*
â”‚ âž“ ðŸ•ï¸  *á´á´€ÉªÉ´ á´á´‡É´á´œ*
â”‚ â“« ðŸŽ¨  *ÊŸá´É¢á´ á´á´€á´‹á´‡Ê€*
â”‚ â“¬ âš™ï¸  *sá´‡á´›á´›ÉªÉ´É¢s á´á´‡É´á´œ*
â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â­‘

ðŸ’¡ _á´›Êá´˜á´‡_ *${prefix}menu2* _á´›á´ êœ±á´‡á´‡ á´€É´á´á´›Êœá´‡Ê€ á´á´‡É´á´œ._

> ${config.DESCRIPTION}
`;


        // Context for mentioning and newsletter forwarding (kept as you had)
        const contextInfo = {
    mentionedJid: [config.OWNER_NUMBER + '@s.whatsapp.net'],
    forwardingScore: 999,
    isForwarded: true,
    forwardedNewsletterMessageInfo: {
        newsletterJid: '120363403627964616@newsletter',
        newsletterName: config.OWNER_NAME,
        serverMessageId: 143
    }
};

        const sendMenuImage = async () => {
            try {
                return await conn.sendMessage(
                    from,
                    {
                        image: { url: config.MENU_IMAGE_URL || 'https://files.catbox.moe/018gb0.png' },
                        caption: menuCaption,
                        contextInfo
                    },
                    { quoted: mek }
                );
            } catch (e) {
                console.log('Image send failed, fallback to text');
                return await conn.sendMessage(
                    from,
                    { text: menuCaption, contextInfo },
                    { quoted: mek }
                );
            }
        };

        const sendMenuAudio = async () => {
            try {
                await new Promise(resolve => setTimeout(resolve, 1000));
                await conn.sendMessage(from, {
      audio: { url: 'https://o.uguu.se/bENmpXKa.mp3' },
      mimetype: 'audio/mp4',
      ptt: true
    }, { quoted: mek });
    
            } catch (e) {
                console.log('Audio send failed');
            }
        };

        let sentMsg;
        try {
            sentMsg = await Promise.race([
                sendMenuImage(),
                new Promise((_, reject) => setTimeout(() => reject(new Error('Image timeout')), 10000))
            ]);
            await Promise.race([
                sendMenuAudio(),
                new Promise((_, reject) => setTimeout(() => reject(new Error('Audio timeout')), 8000))
            ]);
        } catch (e) {
            console.log('Error sending menu:', e.message);
            if (!sentMsg) {
                await conn.sendMessage(
                    from,
                    { text: menuCaption, contextInfo },
                    { quoted: mek }
                );
            }
        }
    
        
        const messageID = sentMsg.key.id;

        // Menu data (complete version)
        const menuData = {
            '1': {
                title: "ðŸ“¥ *Download Menu* ðŸ“¥",
                content: `

â•­â”€â”€âžŠ *á´…á´á´¡É´ÊŸá´á´€á´… á´á´‡É´á´œ* âžŠâ”€â”€

ðŸ“¥ á´…á´á´¡É´ÊŸá´á´€á´…á´‡Ê€s & á´á´‡á´…Éªá´€ á´›á´á´ÊŸs

â”‚ â¬¡ á´€á´˜á´‹
â”‚ â¬¡ Ò“Ê™
â”‚ â¬¡ É¢á´…Ê€Éªá´ á´‡
â”‚ â¬¡ Éªá´É¢
â”‚ â¬¡ ÉªÉ¢Éªá´á´€É¢á´‡á´…ÊŸ
â”‚ â¬¡ ÉªÉ¢á´ Éªá´…
â”‚ â¬¡ á´á´‡á´…Éªá´€Ò“ÉªÊ€á´‡
â”‚ â¬¡ á´á´‡á´…Éªá´€Ò“ÉªÊ€á´‡2
â”‚ â¬¡ á´›Éªá´‹á´›á´á´‹
â”‚ â¬¡ á´›Éªá´‹á´›á´á´‹2
â”‚ â¬¡ Êá´›á´˜á´sá´›
â”‚ â¬¡ Êá´›2
â”‚ â¬¡ á´˜ÉªÉ´á´…ÊŸ
â”‚ â¬¡ á´›á´¡Éªá´›á´›á´‡Ê€

ðŸ“š á´‹É´á´á´¡ÊŸá´‡á´…É¢á´‡ & á´œá´›ÉªÊŸs

â”‚ â¬¡ Ê™ÉªÊ™ÊŸá´‡
â”‚ â¬¡ Ê™ÉªÊ™ÊŸá´‡ÊŸÉªsá´›
â”‚ â¬¡ É´á´‡á´¡s
â”‚ â¬¡ É´á´˜á´
â”‚ â¬¡ á´˜á´€ÉªÊ€
â”‚ â¬¡ É¢Éªá´›á´„ÊŸá´É´á´‡

ðŸŽ§ á´€á´œá´…Éªá´ & á´ Éªá´…á´‡á´

â”‚ â¬¡ sá´É´É¢
â”‚ â¬¡ á´˜ÊŸá´€Ê
â”‚ â¬¡ á´ Éªá´…á´‡á´
â”‚ â¬¡ á´ Éªá´…á´‡á´2
â”‚ â¬¡ á´›á´›s

ðŸŽ¬ á´‡É´á´›á´‡Ê€á´›á´€ÉªÉ´á´á´‡É´á´›
â”‚ â¬¡ á´á´á´ Éªá´‡
â”‚ â¬¡ Êá´›s

â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

> ${config.DESCRIPTION}`,
                image: true
            },
            '2': {
                title: "ðŸ‘¥ *Group Menu* ðŸ‘¥",
                content: `

â•­â”€âž‹ *É¢Ê€á´á´œá´˜ á´á´‡É´á´œ* âž‹â”€

ðŸ”§ É¢Ê€á´á´œá´˜ á´á´€É´á´€É¢á´‡á´á´‡É´á´›
â”‚ â¬¡ Ê€á´‡Ï™á´œá´‡sá´›ÊŸÉªsá´›
â”‚ â¬¡ á´€á´„á´„á´‡á´˜á´›á´€ÊŸÊŸ
â”‚ â¬¡ Ê€á´‡á´Šá´‡á´„á´›á´€ÊŸÊŸ
â”‚ â¬¡ Ê€á´‡á´á´á´ á´‡á´á´‡á´Ê™á´‡Ê€s
â”‚ â¬¡ Ê€á´‡á´á´á´ á´‡á´€á´…á´ÉªÉ´s
â”‚ â¬¡ Ê€á´‡á´á´á´ á´‡á´€ÊŸÊŸ2
â”‚ â¬¡ É¢Ê€á´á´œá´˜sá´˜Ê€Éªá´ á´€á´„Ê
â”‚ â¬¡ á´œá´˜á´…á´€á´›á´‡É¢á´…á´‡sá´„
â”‚ â¬¡ á´œá´˜á´…á´€á´›á´‡É¢É´á´€á´á´‡
â”‚ â¬¡ Ê€á´‡á´ á´á´‹á´‡
â”‚ â¬¡ É¢ÉªÉ´Ò“á´

ðŸ‘¥ á´á´‡á´Ê™á´‡Ê€ ÉªÉ´á´›á´‡Ê€á´€á´„á´›Éªá´É´
â”‚ â¬¡ á´Šá´ÉªÉ´
â”‚ â¬¡ ÉªÉ´á´ Éªá´›á´‡
â”‚ â¬¡ ÊœÉªá´…á´‡á´›á´€É¢
â”‚ â¬¡ á´›á´€É¢á´€ÊŸÊŸ
â”‚ â¬¡ á´›á´€É¢á´€á´…á´ÉªÉ´s
â”‚ â¬¡ á´˜á´ÊŸÊŸ
â”‚ â¬¡ Ê™Ê€á´á´€á´…á´„á´€sá´›

ðŸ”’ É¢Ê€á´á´œá´˜ sá´‡á´„á´œÊ€Éªá´›Ê & á´„á´É´á´›Ê€á´ÊŸ
â”‚ â¬¡ ÊŸá´á´„á´‹É¢á´„
â”‚ â¬¡ á´œÉ´ÊŸá´á´„á´‹É¢á´„
â”‚ â¬¡ á´á´œá´›á´‡
â”‚ â¬¡ á´œÉ´á´á´œá´›á´‡
â”‚ â¬¡ á´€É´á´›ÉªÊŸÉªÉ´á´‹
â”‚ â¬¡ á´€É´á´›ÉªÊŸÉªÉ´á´‹á´‹Éªá´„á´‹
â”‚ â¬¡ á´…á´‡ÊŸá´‡á´›á´‡ÊŸÉªÉ´á´‹
â”‚ â¬¡ á´€É´á´›ÉªÊ™á´á´›
â”‚ â¬¡ á´…á´‡ÊŸá´‡á´›á´‡

âœ¨ á´„Ê€á´‡á´€á´›Éªá´É´ & á´›á´á´ÊŸs
â”‚ â¬¡ É´á´‡á´¡É¢á´„

â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

> ${config.DESCRIPTION}`,
                image: true
            },
            '3': {
                title: "ðŸ˜„ *Fun Menu* ðŸ˜„",
                content: `
â•­â”€âžŒã€” *Ò“á´œÉ´ á´á´‡É´á´œ* ã€•âžŒâ”€

â”‚ â¬¡ á´„á´á´œá´˜ÊŸá´‡á´˜á´˜
â”‚ â¬¡ Ê€ÉªÉ´É¢á´›á´É´á´‡
â”‚ â¬¡ á´‡á´Éªx
â”‚ â¬¡ Êœá´€á´˜á´˜Ê
â”‚ â¬¡ Êœá´‡á´€Ê€á´›
â”‚ â¬¡ á´€É´É¢Ê€Ê
â”‚ â¬¡ sá´€á´…
â”‚ â¬¡ sÊœÊ
â”‚ â¬¡ á´á´á´É´
â”‚ â¬¡ á´„á´É´Ò“á´œsá´‡á´…
â”‚ â¬¡ Êœá´á´›
â”‚ â¬¡ É´Éªá´‹á´€ÊŸ
â”‚ â¬¡ á´„á´á´á´˜á´€á´›ÉªÊ™ÉªÊŸÉªá´›Ê
â”‚ â¬¡ á´€á´œÊ€á´€
â”‚ â¬¡ 8Ê™á´€ÊŸÊŸ
â”‚ â¬¡ á´„á´á´á´˜ÊŸÉªá´á´‡É´á´›
â”‚ â¬¡ ÊŸá´á´ á´‡á´›á´‡sá´›
â”‚ â¬¡ á´‡á´á´á´ŠÉª
â”‚ â¬¡ Ò“á´€É´á´„Ê
â”‚ â¬¡ á´…Éªá´…Êá´á´œá´‹É´á´á´¡
â”‚ â¬¡ á´á´€Ê€ÉªÉ¢á´‡
â”‚ â¬¡ Ï™á´œÉªá´¢
â”‚ â¬¡ sÊœÉªá´˜
â”‚ â¬¡ sÏ™á´œÉªá´…É¢á´€á´á´‡
â”‚ â¬¡ á´‹á´É´á´€á´Éª
â”‚ â¬¡ Êœá´€á´„á´‹
â”‚ â¬¡ Ï™á´œá´á´›á´‡
â”‚ â¬¡ Ê€á´¡
â”‚ â¬¡ Ê€á´„á´ÊŸá´Ê€
â”‚ â¬¡ Ê€á´ÊŸÊŸ
â”‚ â¬¡ á´„á´ÉªÉ´Ò“ÊŸÉªá´˜
â”‚ â¬¡ Ò“ÊŸÉªá´˜
â”‚ â¬¡ á´˜Éªá´„á´‹
â”‚ â¬¡ sÊœá´€á´˜á´€Ê€
â”‚ â¬¡ Ê€á´€á´›á´‡
â”‚ â¬¡ á´„á´á´œÉ´á´›x
â”‚ â¬¡ á´„á´á´œÉ´á´›
â”‚ â¬¡ á´Šá´á´‹á´‡
â”‚ â¬¡ Ò“ÊŸÉªÊ€á´›
â”‚ â¬¡ á´›Ê€á´œá´›Êœ
â”‚ â¬¡ á´…á´€Ê€á´‡
â”‚ â¬¡ Ò“á´€á´„á´›
â”‚ â¬¡ á´˜Éªá´„á´‹á´œá´˜ÊŸÉªÉ´á´‡
â”‚ â¬¡ á´„Êœá´€Ê€á´€á´„á´›á´‡Ê€
â”‚ â¬¡ Ê€á´‡á´˜á´‡á´€á´›
â”‚ â¬¡ sá´‡É´á´…

â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                
> ${config.DESCRIPTION}`,
                image: true
            },
            '4': {
                title: "ðŸ‘‘ *Owner Menu* ðŸ‘‘",
                content: `
â•­â”€âžã€” *á´á´¡É´á´‡Ê€ á´á´‡É´á´œ* ã€•âžâ”€

ðŸ“¦ á´á´€É´á´€É¢á´‡á´á´‡É´á´› & á´„á´É´á´›Ê€á´ÊŸ  
â”‚ â¬¡ Ê™á´€É´  
â”‚ â¬¡ á´œÉ´Ê™á´€É´  
â”‚ â¬¡ ÊŸÉªsá´›Ê™á´€É´  
â”‚ â¬¡ Ê™ÊŸá´á´„á´‹  
â”‚ â¬¡ á´œÉ´Ê™ÊŸá´á´„á´‹  
â”‚ â¬¡ Ê™ÊŸá´á´„á´‹ÊŸÉªsá´›  
â”‚ â¬¡ sÊœá´œá´›á´…á´á´¡É´  
â”‚ â¬¡ Ê€á´‡sá´›á´€Ê€á´›  
â”‚ â¬¡ á´„ÊŸá´‡á´€Ê€á´„Êœá´€á´›s  
â”‚ â¬¡ ÊŸá´‡á´€á´ á´‡  
â”‚ â¬¡ á´„Êœá´€É´É´á´‡ÊŸÊ€á´‡á´€á´„á´›  
â”‚ â¬¡ Ê™Ê€á´á´€á´…á´„á´€sá´›  
â”‚ â¬¡ sá´‡á´›sá´œá´…á´  
â”‚ â¬¡ á´…á´‡ÊŸsá´œá´…á´  
â”‚ â¬¡ ÊŸÉªsá´›sá´œá´…á´  

ðŸ‘¤ á´˜Ê€á´êœ°ÉªÊŸá´‡ & á´œsá´‡Ê€ á´›á´á´ÊŸs  
â”‚ â¬¡ á´˜á´˜  
â”‚ â¬¡ sá´‡á´›á´˜á´˜  
â”‚ â¬¡ sá´‡á´›á´˜á´˜á´€ÊŸÊŸ  
â”‚ â¬¡ sá´‡á´›á´ÊÉ´á´€á´á´‡  
â”‚ â¬¡ á´œá´˜á´…á´€á´›á´‡Ê™Éªá´  
â”‚ â¬¡ É¢á´‡á´›Ê™Éªá´  
â”‚ â¬¡ É¢á´‡á´›á´˜á´˜  
â”‚ â¬¡ sá´‡á´›á´É´ÊŸÉªÉ´á´‡  
â”‚ â¬¡ É¢á´‡á´›á´˜Ê€Éªá´ á´€á´„Ê  
â”‚ â¬¡ á´˜Ê€Éªá´ á´€á´„Ê  
â”‚ â¬¡ á´˜á´‡Ê€sá´É´  
â”‚ â¬¡ É¢á´‡á´›  
â”‚ â¬¡ sá´€á´ á´‡á´„á´É´á´›á´€á´„á´›  
â”‚ â¬¡ á´ŠÉªá´…  
â”‚ â¬¡ É¢á´ŠÉªá´…  
â”‚ â¬¡ á´€É¢á´‡  
â”‚ â¬¡ á´›Éªá´á´‡á´¢á´É´á´‡  
â”‚ â¬¡ á´€á´…á´ÉªÉ´  
â”‚ â¬¡ á´á´¡É´á´‡Ê€  

ðŸ› ï¸ á´œá´›ÉªÊŸÉªá´›Ê & É¢á´‡É´á´‡Ê€á´€ÊŸ  
â”‚ â¬¡ á´ á´ 2  
â”‚ â¬¡ á´ á´   
â”‚ â¬¡ á´…á´€ÉªÊŸÊÒ“á´€á´„á´›  
â”‚ â¬¡ á´ á´‡Ê€sÉªá´É´  
â”‚ â¬¡ á´sÉ¢  
â”‚ â¬¡ á´˜á´sá´›  
â”‚ â¬¡ á´›á´€á´‹á´‡  
â”‚ â¬¡ sá´›Éªá´„á´‹á´‡Ê€  
â”‚ â¬¡ Ò“á´Ê€á´¡á´€Ê€á´…

â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                
> ${config.DESCRIPTION}`,
                image: true
            },
            '5': {
                title: "ðŸ¤– *AI Menu* ðŸ¤–",
                content: `
â•­â”€âžŽã€” *á´€Éª á´á´‡É´á´œ* ã€•âžŽâ”€

â”ƒ ðŸ’¬ *á´„Êœá´€á´› á´€Éª*
â”ƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”ƒ â€¢ á´€Éª [query]
â”ƒ â€¢ É¢á´˜á´›3 [query]
â”ƒ â€¢ É¢á´˜á´›2 [query]
â”ƒ â€¢ É¢á´˜á´›á´ÉªÉ´Éª [query]
â”ƒ â€¢ É¢á´˜á´› [query]
â”ƒ â€¢ á´á´‡á´›á´€ [query]
â”ƒ â€¢ êœ±á´€É´É¢ ÊŸá´‡á´‡ [query]

â”ƒ ðŸ–¼ï¸ *Éªá´á´€É¢á´‡ á´€Éª*
â”ƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”ƒ â€¢ Éªá´á´€É¢ÉªÉ´á´‡ [text]
â”ƒ â€¢ Éªá´á´€É¢ÉªÉ´á´‡2 [text]
â”ƒ â€¢ êœ±á´€É´É¢ ÊŸá´‡á´‡á´€Éª [query]

â”ƒ ðŸ” *êœ±á´˜á´‡á´„Éªá´€ÊŸÉªá´¢á´‡á´…*
â”ƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”ƒ â€¢ Ê™ÊŸá´€á´„á´‹Ê™á´x [query]
â”ƒ â€¢ ÊŸá´œá´á´€ [query]
â”ƒ â€¢ á´…á´Š [query]
â”ƒ â€¢ êœ±á´€É´É¢ ÊŸá´‡á´‡ [query]

â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
               
> ${config.DESCRIPTION}`,
                image: true
            },
            '6': {
                title: "ðŸŽŽ *Anime Menu* ðŸŽŽ",
                content: `
â•­â”€âž *á´€É´Éªá´á´‡ á´á´‡É´á´œ* âžâ”€

âœ¨ á´€É´Éªá´á´‡ É¢ÉªÊ€ÊŸs & á´„Êœá´€Ê€á´€á´„á´›á´‡Ê€s
â”‚ â¬¡ á´€É´Éªá´á´‡É¢ÉªÊ€ÊŸ
â”‚ â¬¡ á´€É´Éªá´á´‡É¢ÉªÊ€ÊŸ1
â”‚ â¬¡ á´€É´Éªá´á´‡É¢ÉªÊ€ÊŸ2
â”‚ â¬¡ á´€É´Éªá´á´‡É¢ÉªÊ€ÊŸ3
â”‚ â¬¡ á´€É´Éªá´á´‡É¢ÉªÊ€ÊŸ4
â”‚ â¬¡ á´€É´Éªá´á´‡É¢ÉªÊ€ÊŸ5
â”‚ â¬¡ á´¡á´€ÉªÒ“á´œ
â”‚ â¬¡ É¢á´€Ê€ÊŸ
â”‚ â¬¡ á´á´‡É¢á´œá´ÉªÉ´
â”‚ â¬¡ á´á´€Éªá´…
â”‚ â¬¡ á´€á´¡á´á´
â”‚ â¬¡ É´á´‡á´‹á´

ðŸ¾ á´€É´Éªá´á´€ÊŸ-á´›Êá´˜á´‡
â”‚ â¬¡ á´…á´É¢
â”‚ â¬¡ á´„á´€á´›

â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

> ${config.DESCRIPTION}`,
                image: true
            },
            '7': {
                title: "ðŸ”„ *Convert Menu* ðŸ”„",
                content: `
â•­â”€âž *á´„á´É´á´ á´‡Ê€á´› á´á´‡É´á´œ* âžâ”€

ðŸ› ï¸ á´„á´É´á´ á´‡Ê€sÉªá´É´ & á´›á´á´ÊŸs
â”‚ â¬¡ á´„á´É´á´ á´‡Ê€á´›
â”‚ â¬¡ á´›á´á´á´˜3
â”‚ â¬¡ á´›á´á´˜á´›á´›
â”‚ â¬¡ á´›á´á´˜á´…Ò“
â”‚ â¬¡ á´€Éªá´ á´Éªá´„á´‡
â”‚ â¬¡ á´›á´›s2
â”‚ â¬¡ á´›á´›s3
â”‚ â¬¡ Ê€á´‡á´€á´…á´á´Ê€á´‡
â”‚ â¬¡ á´›ÉªÉ´Êá´œÊ€ÊŸ

ðŸŽ¨ Éªá´á´€É¢á´‡ & sá´›ÊÊŸá´‡
â”‚ â¬¡ á´˜Êœá´á´›á´
â”‚ â¬¡ Ê™ÊŸá´œÊ€
â”‚ â¬¡ É¢Ê€á´‡Ê
â”‚ â¬¡ ÉªÉ´á´ á´‡Ê€á´›
â”‚ â¬¡ á´Šá´€ÉªÊŸ
â”‚ â¬¡ É´á´á´‹Éªá´€
â”‚ â¬¡ á´¡á´€É´á´›á´‡á´…
â”‚ â¬¡ Ê€á´Ê™É¢
â”‚ â¬¡ Éªá´É¢á´Šá´á´‹á´‡

ðŸŽ­ sá´›Éªá´„á´‹á´‡Ê€ & Ò“á´œÉ´
â”‚ â¬¡ á´ sá´›Éªá´„á´‹á´‡Ê€
â”‚ â¬¡ á´€á´›á´›á´˜

ðŸ“¢ á´á´›Êœá´‡Ê€s
â”‚ â¬¡ á´€á´…
â”‚ â¬¡ á´€á´…


â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€

> ${config.DESCRIPTION}`,
                image: true
            },
            '8': {
                title: "ðŸ“Œ *Other Menu* ðŸ“Œ",
                content: `
â•­â”€âž‘ *á´á´›Êœá´‡Ê€ á´á´‡É´á´œ* âž‘â”€

ðŸ”Ž ÉªÉ´êœ°á´ & êœ±á´‡á´€Ê€á´„Êœ  
â”‚ â¬¡ á´¡á´‡á´€á´›Êœá´‡Ê€  
â”‚ â¬¡ á´¡Éªá´‹Éªá´˜á´‡á´…Éªá´€  
â”‚ â¬¡ á´„á´á´œÉ´á´›Ê€ÊÉªÉ´Ò“á´  
â”‚ â¬¡ á´…á´‡Ò“ÉªÉ´á´‡  
â”‚ â¬¡ á´¡á´€sá´›á´€ÊŸá´‹  
â”‚ â¬¡ á´›Éªá´‹á´›á´á´‹sá´›á´€ÊŸá´‹  
â”‚ â¬¡ xsá´›á´€ÊŸá´‹  
â”‚ â¬¡ Êá´›sá´›á´€ÊŸá´‹  
â”‚ â¬¡ sÊ€á´‡á´˜á´  
â”‚ â¬¡ É´á´˜á´  
â”‚ â¬¡ Éªá´É¢sá´„á´€É´  

ðŸ§° á´›á´á´ÊŸêœ± & á´„á´É´á´ á´‡Ê€êœ±Éªá´É´êœ±  
â”‚ â¬¡ á´„á´€ÊŸá´„á´œÊŸá´€á´›á´‡  
â”‚ â¬¡ Ê™ÉªÉ´á´€Ê€Ê  
â”‚ â¬¡ á´…Ê™ÉªÉ´á´€Ê€Ê  
â”‚ â¬¡ Ê™á´€sá´‡64  
â”‚ â¬¡ á´œÉ´Ê™á´€sá´‡64  
â”‚ â¬¡ á´œÊ€ÊŸá´‡É´á´„á´á´…á´‡  
â”‚ â¬¡ á´œÊ€ÊŸá´…á´‡á´„á´á´…á´‡  
â”‚ â¬¡ ss  
â”‚ â¬¡ á´„á´€á´˜á´›Éªá´É´  
â”‚ â¬¡ á´›Ê€á´›  
â”‚ â¬¡ É¢á´˜á´€ss  

ðŸ“¦ á´€á´˜Éªêœ± & á´›á´‡á´á´˜ êœ±á´‡Ê€á´ Éªá´„á´‡êœ±  
â”‚ â¬¡ á´„Ê€á´‡á´€á´›á´‡á´€á´˜Éª  
â”‚ â¬¡ á´›á´‡á´á´˜É´á´œá´  
â”‚ â¬¡ á´ á´„á´„  
â”‚ â¬¡ á´á´›á´˜Ê™á´x  
â”‚ â¬¡ á´›á´‡á´á´˜á´á´€ÉªÊŸ  
â”‚ â¬¡ á´„Êœá´‡á´„á´‹á´á´€ÉªÊŸ  


â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€

> ${config.DESCRIPTION}`,
                image: true
            },
            '9': {
                title: "ðŸ’ž *Reactions Menu* ðŸ’ž",
                content: `

â•­â”€âž’ *Ê€á´‡á´€á´„á´›Éªá´É´êœ± á´á´‡É´á´œ* âž’â”€

ðŸŽ­ Ê€á´‡á´€á´„á´›Éªá´É´ á´‡á´á´á´›Éªá´É´s
â”‚ â¬¡ á´„Ê€Ê
â”‚ â¬¡ Ê™ÊŸá´œsÊœ
â”‚ â¬¡ sá´ÉªÊŸá´‡
â”‚ â¬¡ Êœá´€á´˜á´˜Ê
â”‚ â¬¡ á´„Ê€ÉªÉ´É¢á´‡
â”‚ â¬¡ sá´á´œÉ¢
â”‚ â¬¡ á´¡ÉªÉ´á´‹

ðŸ¤— á´„á´œá´›á´‡ & á´¡Êœá´ÊŸá´‡sá´á´á´‡
â”‚ â¬¡ á´„á´œá´…á´…ÊŸá´‡
â”‚ â¬¡ Êœá´œÉ¢
â”‚ â¬¡ á´€á´¡á´á´
â”‚ â¬¡ á´˜á´€á´›
â”‚ â¬¡ Êœá´€É´á´…Êœá´ÊŸá´…
â”‚ â¬¡ ÊœÉªÉ¢ÊœÒ“Éªá´ á´‡
â”‚ â¬¡ á´¡á´€á´ á´‡
â”‚ â¬¡ É¢ÊŸá´á´á´˜

ðŸ˜ˆ sÉªÊŸÊŸÊ & sá´€ssÊ
â”‚ â¬¡ Ê™á´œÊŸÊŸÊ
â”‚ â¬¡ Ê™á´É´á´‹
â”‚ â¬¡ Êá´‡á´‡á´›
â”‚ â¬¡ ÊŸÉªá´„á´‹
â”‚ â¬¡ É´á´á´
â”‚ â¬¡ á´˜á´á´‹á´‡
â”‚ â¬¡ á´…á´€É´á´„á´‡

ðŸ’¥ ÉªÉ´á´›á´‡É´sá´‡ á´€á´„á´›Éªá´É´s
â”‚ â¬¡ á´‹ÉªÊŸÊŸ
â”‚ â¬¡ sÊŸá´€á´˜
â”‚ â¬¡ á´‹Éªss


â•°â”€â”€â”€â”€â”€â”€â”€â”€

> ${config.DESCRIPTION}`,
                image: true
            },
                        '10': {
                title: "ðŸ  *Main Menu* ðŸ ",
                content: `
â•­â”€â”€âž“ *á´á´€ÉªÉ´ á´á´‡É´á´œ* âž“â”€â”€
â”‚
â”‚ â„¹ï¸ *Ê™á´á´› ÉªÉ´Ò“á´*âœª
â”‚â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ â€¢ ping
â”‚ â€¢ env
â”‚ â€¢ live
â”‚ â€¢ alive
â”‚ â€¢ runtime
â”‚ â€¢ uptime
â”‚ â€¢ repo
â”‚ â€¢ owner
â”‚ â€¢ user
â”‚ â€¢ help
â”‚ â€¢ time
â”‚ â€¢ date
â”‚ â€¢ report
â”‚ â€¢ fetch
â”‚ â€¢ githubstalk
â”‚ â€¢ support
â•°â”€âœª
â•­â”€â
â”‚ ðŸ› ï¸ *á´„á´É´Ê€á´ÊŸs*
â”‚â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ â€¢ menu
â”‚ â€¢ menu2
â”‚ â€¢ menu3 
â”‚ â€¢ restart
â•°â”€âœª

> ${config.DESCRIPTION}`,
            image: true
            },
             '11': {
                title: "ðŸ  *LOGO CMD* ðŸ ",
                content: `
â•­â”€â”€â“« *ÊŸá´É¢á´ á´á´‡É´á´œ* â“«â”€â”€

ðŸŽ¨ ÊŸá´É¢á´ & á´›á´‡xá´› sá´›ÊÊŸá´‡s

â”‚ â¬¡ 3á´…á´„á´á´Éªá´„
â”‚ â¬¡ 3á´…á´˜á´€á´˜á´‡Ê€
â”‚ â¬¡ É´á´‡á´É´ÊŸÉªÉ¢Êœá´›
â”‚ â¬¡ Ò“á´œá´›á´œÊ€Éªsá´›Éªá´„
â”‚ â¬¡ á´„ÊŸá´á´œá´…s
â”‚ â¬¡ É¢á´€ÊŸá´€xÊ
â”‚ â¬¡ ÊŸá´‡á´€Ò“
â”‚ â¬¡ sá´œÉ´sá´‡á´›
â”‚ â¬¡ á´…á´‡á´ ÉªÊŸá´¡ÉªÉ´É¢s
â”‚ â¬¡ á´€É´É¢á´‡ÊŸá´¡ÉªÉ´É¢s
â”‚ â¬¡ Ê™ÉªÊ€á´›Êœá´…á´€Ê
â”‚ â¬¡ Ê™ÊŸá´€á´„á´‹á´˜ÉªÉ´á´‹
â”‚ â¬¡ á´›Êá´˜á´É¢Ê€á´€á´˜ÊœÊ
â”‚ â¬¡ á´¢á´á´…Éªá´€á´„
â”‚ â¬¡ ÊŸá´œxá´œÊ€Ê
â”‚ â¬¡ á´˜á´€ÉªÉ´á´›

ðŸ¦¸ á´„Êœá´€Ê€á´€á´„á´›á´‡Ê€ á´›Êœá´‡á´á´‡á´…
â”‚ â¬¡ á´…Ê€á´€É¢á´É´Ê™á´€ÊŸÊŸ
â”‚ â¬¡ á´…á´‡á´€á´…á´˜á´á´ÊŸ
â”‚ â¬¡ É´á´€Ê€á´œá´›á´
â”‚ â¬¡ á´›Êœá´Ê€
â”‚ â¬¡ á´€á´á´‡Ê€Éªá´„á´€
â”‚ â¬¡ Êœá´€á´„á´‹á´‡Ê€
â”‚ â¬¡ á´„á´€sá´›ÊŸá´‡
â”‚ â¬¡ Ò“Ê€á´á´¢á´‡É´

ðŸ˜ˆ Ò“á´œÉ´ & sÊá´Ê™á´ÊŸÉªá´„
â”‚ â¬¡ á´„á´€á´›
â”‚ â¬¡ sá´€á´…É¢ÉªÊ€ÊŸ
â”‚ â¬¡ á´˜á´Ê€É´Êœá´œÊ™
â”‚ â¬¡ É´ÉªÉ¢á´‡Ê€Éªá´€
â”‚ â¬¡ Ê™á´á´á´
â”‚ â¬¡ Ê™á´œÊŸÊ™
â”‚ â¬¡ á´›á´€á´›á´á´
â”‚ â¬¡ á´‡Ê€á´€sá´‡Ê€
â”‚ â¬¡ Ê™á´‡á´€Ê€

ðŸ“º á´Éªsá´„ & ÊŸá´€Ê™á´‡ÊŸs
â”‚ â¬¡ sá´€É´s
â”‚ â¬¡ Êá´›ÊŸá´É¢á´

â•°â”€âœª

> ${config.DESCRIPTION}`,
                image: true
                },
            '12': {
                title: "ðŸŽ *Settings Menu* ðŸŽ",
                content: `

âš™ï¸ á´€á´œá´›á´á´á´€á´›Éªá´É´ & Ê™á´‡Êœá´€á´ Éªá´Ê€  

â”‚ â¬¡ á´€á´œá´›á´-á´›Êá´˜ÉªÉ´É¢  
â”‚ â¬¡ á´€á´œá´›á´-Ê€á´‡á´„á´Ê€á´…ÉªÉ´É¢  
â”‚ â¬¡ á´€á´œá´›á´-sá´‡á´‡É´  
â”‚ â¬¡ á´€ÊŸá´¡á´€Ês-á´É´ÊŸÉªÉ´á´‡  
â”‚ â¬¡ á´€á´œá´›á´-á´ á´Éªá´„á´‡  
â”‚ â¬¡ á´€á´œá´›á´-sá´›Éªá´„á´‹á´‡Ê€  
â”‚ â¬¡ á´€á´œá´›á´-Ê€á´‡á´˜ÊŸÊ  
â”‚ â¬¡ á´€á´œá´›á´-Ê€á´‡á´€á´„á´›  
â”‚ â¬¡ sá´›á´€á´›á´œs-Ê€á´‡á´€á´„á´›  
â”‚ â¬¡ sá´›á´€á´›á´œs-Ê€á´‡á´˜ÊŸÊ  

ðŸ‘® á´€á´…á´ÉªÉ´ & êœ±á´‡á´„á´œÊ€Éªá´›Ê  
â”‚ â¬¡ á´€á´…á´ÉªÉ´-á´‡á´ á´‡É´á´›s  
â”‚ â¬¡ á´€É´á´›Éªá´…á´‡ÊŸá´‡á´›á´‡  
â”‚ â¬¡ á´€É´á´›Éª-Ê™á´€á´…  
â”‚ â¬¡ sá´‡á´›á´˜Ê€á´‡Ò“Éªx  
â”‚ â¬¡ sá´‡á´›á´ á´€Ê€  
â”‚ â¬¡ á´á´á´…á´‡  

ðŸ’¬ Ê€á´‡á´˜ÊŸÉªá´‡êœ± & ÉªÉ´á´›á´‡Ê€á´€á´„á´›Éªá´É´êœ±  
â”‚ â¬¡ á´¡á´‡ÊŸá´„á´á´á´‡  
â”‚ â¬¡ Ò“á´€á´‹á´‡á´›Êá´˜ÉªÉ´É¢  
â”‚ â¬¡ Ò“á´€á´‹á´‡Ê€á´‡á´„á´Ê€á´…ÉªÉ´É¢  
â”‚ â¬¡ á´á´‡É´á´›Éªá´É´-Ê€á´‡á´˜ÊŸÊ  
â”‚ â¬¡ Ê€á´‡á´€á´…-á´á´‡ssá´€É¢á´‡  
â”‚ â¬¡ Êœá´‡á´€Ê€á´›Ê€á´‡á´€á´„á´›  

â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â—â–º

> ðŸ“Œ *É´á´á´›á´‡*: á´€á´…á´… "á´É´/á´Ò“Ò“" á´¡Éªá´›Êœ á´›Êœá´‡ á´…á´‡sÉªÊ€á´‡á´… sá´›á´€á´›á´‡ á´›á´ á´‡É´á´€Ê™ÊŸá´‡ á´Ê€ á´…Éªsá´€Ê™ÊŸá´‡ á´á´sá´› á´Ì„ á´‡Ì„ á´€Ê™á´á´ á´‡ðŸ‘† Ò“á´‡á´€á´›á´œÊ€á´‡s. á´‡É¢ .á´€á´œá´›á´Ê€á´‡á´€á´„á´› á´É´

ðŸ“Š á´›á´á´›á´€ÊŸ á´„á´á´á´á´€É´á´…s ÊŸÉªsá´› sá´‡á´›á´›ÉªÉ´É¢s: 25

> ${config.DESCRIPTION}`,
                image: true
            }
        };

        // Message handler with improved error handling
        const handler = async (msgData) => {
            try {
                const receivedMsg = msgData.messages[0];
                if (!receivedMsg?.message || !receivedMsg.key?.remoteJid) return;

                const isReplyToMenu = receivedMsg.message.extendedTextMessage?.contextInfo?.stanzaId === messageID;
                
                if (isReplyToMenu) {
                    const receivedText = receivedMsg.message.conversation || 
                                      receivedMsg.message.extendedTextMessage?.text;
                    const senderID = receivedMsg.key.remoteJid;

                    if (menuData[receivedText]) {
                        const selectedMenu = menuData[receivedText];
                        
                        try {
                            if (selectedMenu.image) {
                                await conn.sendMessage(
                                    senderID,
                                    {
                                        image: { url: config.MENU_IMAGE_URL || 'https://files.catbox.moe/gqsf1j.jpg' },
                                        caption: selectedMenu.content,
                                        contextInfo: contextInfo
                                    },
                                    { quoted: receivedMsg }
                                );
                            } else {
                                await conn.sendMessage(
                                    senderID,
                                    { text: selectedMenu.content, contextInfo: contextInfo },
                                    { quoted: receivedMsg }
                                );
                            }

                            await conn.sendMessage(senderID, {
                                react: { text: 'âœ…', key: receivedMsg.key }
                            });

                        } catch (e) {
                            console.log('Menu reply error:', e);
                            await conn.sendMessage(
                                senderID,
                                { text: selectedMenu.content, contextInfo: contextInfo },
                                { quoted: receivedMsg }
                            );
                        }

                    } else {
                        await conn.sendMessage(
                            senderID,
                            {
                                text: `âŒ *Invalid Option!* âŒ\n\nPlease reply with a number between 1-12 to select a menu.\n\n*Example:* Reply with "1" for Download Menu\n\n> ${config.DESCRIPTION}`,
                                contextInfo: contextInfo
                            },
                            { quoted: receivedMsg }
                        );
                    }
                }
            } catch (e) {
                console.log('Handler error:', e);
            }
        };

        // Add listener
        conn.ev.on("messages.upsert", handler);

        // Remove listener after 5 minutes
        setTimeout(() => {
            conn.ev.off("messages.upsert", handler);
        }, 300000);

    } catch (e) {
        console.error('Menu Error:', e);
        try {
            await conn.sendMessage(
                from,
                { text: `âŒ Menu system is currently busy. Please try again later.\n\n> ${config.DESCRIPTION}` },
                { quoted: mek }
            );
        } catch (finalError) {
            console.log('Final error handling failed:', finalError);
        }
    }
});
